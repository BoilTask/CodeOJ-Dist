{"version":3,"sources":["webpack:///./src/views/Discuss/DiscussAdd.vue?4e9c","webpack:///src/views/Discuss/DiscussAdd.vue","webpack:///./src/views/Discuss/DiscussAdd.vue?b72d","webpack:///./src/views/Discuss/DiscussAdd.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","ref","formValidate","ruleValidate","model","value","callback","$$v","$set","expression","_v","staticClass","slot","btnLoading","on","$event","handleSubmit","$imgAdd","saveContent","content","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,UAAU,CAACG,YAAY,CAAC,QAAU,QAAQ,CAACH,EAAG,OAAO,CAACA,EAAG,OAAO,CAACI,IAAI,eAAeF,MAAM,CAAC,MAAQN,EAAIS,aAAa,MAAQT,EAAIU,aAAa,cAAc,KAAK,CAACN,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,YAAc,SAASK,MAAM,CAACC,MAAOZ,EAAIS,aAAkB,MAAEI,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIS,aAAc,QAASK,IAAME,WAAW,yBAAyB,GAAGZ,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,YAAY,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,YAAc,WAAWK,MAAM,CAACC,MAAOZ,EAAIS,aAAoB,QAAEI,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIS,aAAc,UAAWK,IAAME,WAAW,0BAA0BZ,EAAG,IAAI,CAACA,EAAG,OAAO,CAACE,MAAM,CAAC,KAAO,oCAAoCN,EAAIiB,GAAG,iCAAiC,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGb,EAAG,MAAM,CAACE,MAAM,CAAC,KAAO,MAAM,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,OAAO,eAAe,KAAK,CAACF,EAAG,MAAM,CAACG,YAAY,CAAC,mBAAmB,UAAU,QAAU,QAAQ,CAACH,EAAG,OAAO,CAACc,YAAY,eAAe,CAACd,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,SAASa,KAAK,SAAS,CAACnB,EAAIiB,GAAG,UAAUb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,SAASa,KAAK,SAAS,CAACf,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,UAAU,QAAUN,EAAIoB,YAAYC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,aAAa,mBAAmB,CAACvB,EAAIiB,GAAG,SAAS,GAAGb,EAAG,QAAQ,CAACE,MAAM,CAAC,eAAc,MAAU,IAAI,MAAM,IAAI,GAAGF,EAAG,OAAO,CAACA,EAAG,eAAe,CAACI,IAAI,SAASD,YAAY,CAAC,aAAa,SAASc,GAAG,CAAC,OAASrB,EAAIwB,QAAQ,KAAOxB,EAAIyB,aAAad,MAAM,CAACC,MAAOZ,EAAW,QAAEa,SAAS,SAAUC,GAAMd,EAAI0B,QAAQZ,GAAKE,WAAW,cAAc,IAAI,IACzoDW,EAAkB,GC2CtB,G,UAAA,CACA,mBACA,KAFA,WAGA,OACA,cACA,cACA,SACA,YAEA,cACA,QACA,YACA,kBACA,iBAEA,UACA,YACA,kBACA,kBAGA,aAGA,QAxBA,WAyBA,wDAEA,SACA,kCACA,+BACA,oCACA,iCACA,oCAEA,yBACA,mCACA,CACA,kBACA,0BACA,wDACA,oDACA,0CACA,8CACA,iCACA,mBACA,MACA,iDACA,kBACA,mBACA,4BACA,4DAEA,0BACA,gBACA,kBACA,mBACA,6BACA,mBACA,uBAKA,aApCA,SAoCA,cACA,oCACA,KACA,sBACA,gCACA,CACA,eACA,gBACA,0BACA,qDACA,iDACA,uCACA,2CACA,8BACA,MACA,8CACA,kBACA,eACA,mBACA,4BACA,4DAEA,0BAEA,mBACA,mBACA,kBACA,mBACA,qCAIA,+BAIA,QAxEA,SAwEA,gBACA,kBACA,qDACA,kBACA,gCAEA,0BACA,gCACA,mBAEA,mBACA,gCACA,mBAEA,MACA,oCACA,kBACA,8DACA,eACA,iCACA,mBACA,qBAGA,mBACA,sBCxK0d,I,YCOtdC,EAAY,eACd,EACA7B,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d2315a4.9d912485.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',[_c('Row',[_c('Col',{attrs:{\"span\":\"16\"}},[_c('Content',{staticStyle:{\"padding\":\"5px\"}},[_c('Card',[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"title\"},model:{value:(_vm.formValidate.title),callback:function ($$v) {_vm.$set(_vm.formValidate, \"title\", $$v)},expression:\"formValidate.title\"}})],1),_c('FormItem',{attrs:{\"label\":\"主题\",\"prop\":\"keyword\"}},[_c('Input',{attrs:{\"placeholder\":\"keyword\"},model:{value:(_vm.formValidate.keyword),callback:function ($$v) {_vm.$set(_vm.formValidate, \"keyword\", $$v)},expression:\"formValidate.keyword\"}}),_c('p',[_c('Icon',{attrs:{\"type\":\"ios-information-circle-outline\"}}),_vm._v(\"可使用指定格式关键词关联页面\\n\\t\\t\\t\\t\\t\\t\")],1)],1)],1)],1)],1)],1),_c('Col',{attrs:{\"span\":\"8\"}},[_c('Sider',{attrs:{\"width\":\"100%\",\"hide-trigger\":\"\"}},[_c('div',{staticStyle:{\"background-color\":\"#f8f8f9\",\"padding\":\"5px\"}},[_c('Card',{staticClass:\"DiscussCard\"},[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"新建讨论\")]),_c('p',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},on:{\"click\":function($event){return _vm.handleSubmit('formValidate')}}},[_vm._v(\"提交\")])],1),_c('Table',{attrs:{\"show-header\":false}})],1)],1)])],1)],1),_c('Card',[_c('mavon-editor',{ref:\"editor\",staticStyle:{\"min-height\":\"600px\"},on:{\"imgAdd\":_vm.$imgAdd,\"save\":_vm.saveContent},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<Content>\r\n\t\t<Row>\r\n\t\t\t<Col span=\"16\">\r\n\t\t\t<Content style=\"padding: 5px;\">\r\n\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n\t\t\t\t\t\t<FormItem label=\"标题\" prop=\"title\">\r\n\t\t\t\t\t\t\t<Input v-model=\"formValidate.title\" placeholder=\"title\"></Input>\r\n\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t<FormItem label=\"主题\" prop=\"keyword\">\r\n\t\t\t\t\t\t\t<Input v-model=\"formValidate.keyword\" placeholder=\"keyword\"></Input>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t<Icon type=\"ios-information-circle-outline\" />可使用指定格式关键词关联页面\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Card>\r\n\t\t\t</Content>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"8\">\r\n\t\t\t<Sider width=\"100%\" hide-trigger>\r\n\t\t\t\t<div style=\"background-color: #f8f8f9; padding: 5px;\">\r\n\r\n\t\t\t\t\t<Card class=\"DiscussCard\">\r\n\t\t\t\t\t\t<p slot=\"title\">新建讨论</p>\r\n\t\t\t\t\t\t<p slot=\"extra\">\r\n\t\t\t\t\t\t\t<Button type=\"primary\" :loading=\"btnLoading\" @click=\"handleSubmit('formValidate')\">提交</Button>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<Table :show-header=\"false\"></Table>\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</Sider>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t\t<Card>\r\n\t\t\t<mavon-editor ref=\"editor\" @imgAdd=\"$imgAdd\" v-model=\"content\" style=\"min-height: 600px;\" v-on:save=\"saveContent\" />\r\n\t\t</Card>\r\n\t</Content>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'DiscussEdit',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbtnLoading: false,\r\n\t\t\t\tformValidate: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tkeyword: ''\r\n\t\t\t\t},\r\n\t\t\t\truleValidate: {\r\n\t\t\t\t\ttitle: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '标题不能为空！',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tkeyword: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '主题不能为空！',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tcontent: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.formValidate.keyword = this.$route.query['keyword']\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsaveContent: function() {\r\n\t\t\t\tif (this.formValidate.title == '') {\r\n\t\t\t\t\tthis.$Message.error('请先输入标题！');\r\n\t\t\t\t} else if (this.formValidate.keyword == '') {\r\n\t\t\t\t\tthis.$Message.error('请先输入主题！');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.content.length < 1) {\r\n\t\t\t\t\t\tthis.$Message.error('内容不能为空!');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$Spin.show();\r\n\t\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\t\tparams.append('user_id', this.$store.state.loginInfo.user_id);\r\n\t\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\t\tparams.append('title', this.formValidate.title);\r\n\t\t\t\t\t\tparams.append('keyword', this.formValidate.keyword);\r\n\t\t\t\t\t\tparams.append('content', this.content);\r\n\t\t\t\t\t\tthis.btnLoading = true\r\n\t\t\t\t\t\taxios\r\n\t\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'discuss/add', params)\r\n\t\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\t\tthis.$Message.success('保存成功！');\r\n\t\t\t\t\t\t\t\t\tthis.$router.push('/discuss/' + response.data.data.discuss_id + '/edit')\r\n\t\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\t\tthis.$Message.error('保存失败！');\r\n\t\t\t\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\tthis.$Message.error('保存失败！');\r\n\t\t\t\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSubmit(name) {\r\n\t\t\t\tthis.$refs[name].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tif (this.content.length < 1) {\r\n\t\t\t\t\t\t\tthis.$Message.error('内容不能为空!');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$Spin.show();\r\n\t\t\t\t\t\t\tthis.btnLoading = true\r\n\t\t\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\t\t\tparams.append('user_id', this.$store.state.loginInfo.user_id);\r\n\t\t\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\t\t\tparams.append('title', this.formValidate.title);\r\n\t\t\t\t\t\t\tparams.append('keyword', this.formValidate.keyword);\r\n\t\t\t\t\t\t\tparams.append('content', this.content);\r\n\t\t\t\t\t\t\taxios\r\n\t\t\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'discuss/add', params)\r\n\t\t\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\t\t\tthis.$Message.success('保存成功！');\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push('/discuss/' + response.data.data.discuss_id + '/edit')\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.$Message.error('保存失败！');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t\t\t\t\t\tthis.$Message.error('保存失败！');\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$Message.error('请检查输入!');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t$imgAdd(pos, $file) {\r\n\t\t\t\tthis.$Spin.show();\r\n\t\t\t\taxios.get(this.$store.state.API_ROOT + 'upload/token')\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tthis.uploadToken = response.data.data.token\r\n\r\n\t\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\t\tparams.append('token', this.uploadToken);\r\n\t\t\t\t\t\tparams.append('file', $file);\r\n\r\n\t\t\t\t\t\tvar formdata = new FormData();\r\n\t\t\t\t\t\tformdata.append('token', this.uploadToken)\r\n\t\t\t\t\t\tformdata.append('file', $file)\r\n\r\n\t\t\t\t\t\taxios\r\n\t\t\t\t\t\t\t.post('https://upload.qiniup.com', formdata)\r\n\t\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\t\tthis.$refs.editor.$img2Url(pos, this.$store.state.CDN_ROOT + response.data.key)\r\n\t\t\t\t\t\t\t\tthis.$Spin.hide()\r\n\t\t\t\t\t\t\t\tthis.$Message.success('图片上传成功！')\r\n\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscussAdd.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscussAdd.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DiscussAdd.vue?vue&type=template&id=6bd65d40\"\nimport script from \"./DiscussAdd.vue?vue&type=script&lang=js\"\nexport * from \"./DiscussAdd.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}