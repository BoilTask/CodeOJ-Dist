{"version":3,"sources":["webpack:///./src/views/Manage/ManageUserInfo.vue?a6f6","webpack:///src/views/Manage/ManageUserInfo.vue","webpack:///./src/views/Manage/ManageUserInfo.vue?8bdb","webpack:///./src/views/Manage/ManageUserInfo.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","slot","_v","_s","email","email_step","email_status","email_flag","model","value","callback","$$v","email_key","expression","on","sendEmailKey","verifyEmailKey","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,YAAY,CAAC,QAAU,SAAS,CAACF,EAAG,OAAO,CAACA,EAAG,IAAI,CAACG,MAAM,CAAC,KAAO,SAASC,KAAK,SAAS,CAACR,EAAIS,GAAG,UAAUL,EAAG,MAAM,CAACE,YAAY,CAAC,aAAa,WAAW,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,MAAM,CAACH,EAAG,OAAO,CAACJ,EAAIS,GAAG,SAASL,EAAG,MAAM,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,WAAW,GAAGP,EAAG,QAAQ,CAACG,MAAM,CAAC,QAAUP,EAAIY,WAAW,OAASZ,EAAIa,aAAa,KAAO,UAAU,CAACT,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,QAAQH,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,QAAQH,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,SAAS,IAAI,GAAGH,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,OAAO,CAAkB,GAAhBP,EAAIc,WAAeV,EAAG,SAAS,CAACG,MAAM,CAAC,SAAW,KAAK,CAACP,EAAIS,GAAG,UAAUL,EAAG,OAAO,CAACA,EAAG,QAAQ,CAACG,MAAM,CAAC,YAAc,YAAYQ,MAAM,CAACC,MAAOhB,EAAa,UAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,UAAUD,GAAKE,WAAW,cAAc,CAAChB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,WAAWC,KAAK,WAAW,CAACJ,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,cAAcc,GAAG,CAAC,SAAWrB,EAAIsB,eAAe,CAACtB,EAAIS,GAAG,YAAY,GAAGL,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQrB,EAAIuB,gBAAgBf,KAAK,UAAU,CAACR,EAAIS,GAAG,WAAW,IAAI,IAAI,IAAI,GAAGL,EAAG,MAAM,IAAI,IACrnCoB,EAAkB,GC2BtB,GACA,sBACA,KAFA,WAGA,OACA,SACA,aACA,aACA,oBACA,eAGA,QAXA,WAWA,WACA,MACA,qFACA,kBACA,0BACA,oCACA,kBACA,eACA,4BAEA,mBACA,mBAGA,SACA,aADA,SACA,cACA,WACA,kCACA,4BACA,0BACA,oDACA,4BACA,8BACA,MACA,4FACA,kBACA,mBACA,eACA,8BAEA,eACA,uBACA,8BAEA,mBACA,0BACA,kCAIA,eA1BA,WA0BA,WACA,4BACA,qCACA,CACA,0BACA,oDACA,qCACA,MACA,+FACA,kBACA,eACA,mBACA,eACA,wBACA,4BACA,kBAEA,eACA,uBACA,uCAEA,mBACA,kBACA,0BACA,oCCvG8d,I,YCO1dC,EAAY,eACd,EACA1B,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d0e13d1.755900f3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{staticStyle:{\"padding\":\"15px\"}},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"邮箱验证\")]),_c('Row',{staticStyle:{\"text-align\":\"center\"}},[_c('Col',{attrs:{\"span\":\"8\"}},[_c('span',[_vm._v(\"您的邮箱：\"),_c('Tag',{attrs:{\"color\":\"blue\"}},[_vm._v(_vm._s(_vm.email))])],1),_c('Steps',{attrs:{\"current\":_vm.email_step,\"status\":_vm.email_status,\"size\":\"small\"}},[_c('Step',{attrs:{\"title\":\"发送\"}}),_c('Step',{attrs:{\"title\":\"验证\"}}),_c('Step',{attrs:{\"title\":\"成功\"}})],1)],1),_c('Col',{attrs:{\"span\":\"16\"}},[(_vm.email_flag==1)?_c('Button',{attrs:{\"disabled\":\"\"}},[_vm._v(\"验证完成\")]):_c('span',[_c('Input',{attrs:{\"placeholder\":\"验证码区分大小写\"},model:{value:(_vm.email_key),callback:function ($$v) {_vm.email_key=$$v},expression:\"email_key\"}},[_c('Button',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('vueTencentCaptcha',{attrs:{\"appid\":\"2081307488\"},on:{\"callback\":_vm.sendEmailKey}},[_vm._v(\"发送验证码\")])],1),_c('Button',{attrs:{\"slot\":\"append\"},on:{\"click\":_vm.verifyEmailKey},slot:\"append\"},[_vm._v(\"点击验证\")])],1)],1)],1)],1),_c('p')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<Content style=\"padding: 15px;\">\r\n\t\t<Card>\r\n\t\t\t<p slot=\"title\">邮箱验证</p>\r\n\t\t\t<Row style=\"text-align: center;\">\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t<span>您的邮箱：<Tag color=\"blue\">{{email}}</Tag></span>\r\n\t\t\t\t<Steps :current=\"email_step\" :status=\"email_status\" size=\"small\">\r\n\t\t\t\t\t<Step title=\"发送\"></Step>\r\n\t\t\t\t\t<Step title=\"验证\"></Step>\r\n\t\t\t\t\t<Step title=\"成功\"></Step>\r\n\t\t\t\t</Steps>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"16\">\r\n\t\t\t\t<Button v-if=\"email_flag==1\" disabled>验证完成</Button>\r\n\t\t\t\t<span v-else><Input v-model=\"email_key\" placeholder=\"验证码区分大小写\">\r\n\t\t\t\t\t<Button slot=\"prepend\">\r\n\t\t\t\t\t\t<vueTencentCaptcha appid=\"2081307488\" @callback=\"sendEmailKey\">发送验证码</vueTencentCaptcha>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button slot=\"append\" v-on:click=\"verifyEmailKey\">点击验证</Button></Input></span>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t</p>\r\n\t\t</Card>\r\n\t</Content>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'ManageUserInfo',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\temail: '',\r\n\t\t\t\temail_flag: 0,\r\n\t\t\t\temail_step: 0,\r\n\t\t\t\temail_status: 'wait',\r\n\t\t\t\temail_key: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\taxios\r\n\t\t\t\t.get(this.$store.state.API_ROOT + 'user/' + this.$store.state.loginInfo.user_id + '/email')\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tthis.email = response.data.data.email\r\n\t\t\t\t\tthis.email_flag = response.data.data.email_flag\r\n\t\t\t\t\tif (this.email_flag == 1) {\r\n\t\t\t\t\t\tthis.email_step = 2\r\n\t\t\t\t\t\tthis.email_status = 'finish'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsendEmailKey(ticket) {\r\n\t\t\t\tif (!ticket.ret) {\r\n\t\t\t\t\tthis.$Message.info('正在尝试发送验证码……');\r\n\t\t\t\t\tthis.email_status = 'process'\r\n\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\tparams.append('ticket', ticket.ticket);\r\n\t\t\t\t\tparams.append('randStr', ticket.randstr);\r\n\t\t\t\t\taxios\r\n\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'user/' + this.$store.state.loginInfo.user_id + '/email/get', params)\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\tthis.email_step = 1\r\n\t\t\t\t\t\t\t\tthis.$Message.success('发送成功！');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.email_step = 0\r\n\t\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\t\tthis.$Message.error('发送失败！');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\tthis.$Message.error('发送失败！');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tverifyEmailKey() {\r\n\t\t\t\tif (this.email_key.length != 6) {\r\n\t\t\t\t\tthis.$Message.error('验证码为6位字符！');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\tparams.append('email_key', this.email_key);\r\n\t\t\t\t\taxios\r\n\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'user/' + this.$store.state.loginInfo.user_id + '/email/verify', params)\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\tthis.email_step = 2\r\n\t\t\t\t\t\t\t\tthis.email_status = 'finish'\r\n\t\t\t\t\t\t\t\tthis.$Message.success('验证成功！');\r\n\t\t\t\t\t\t\t\tthis.$router.go(0)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.email_step = 1\r\n\t\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\t\tthis.$Message.error('验证失败，请重新发送验证码！');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\tthis.$Message.error('验证失败！');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageUserInfo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageUserInfo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ManageUserInfo.vue?vue&type=template&id=5cc741f2\"\nimport script from \"./ManageUserInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ManageUserInfo.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}